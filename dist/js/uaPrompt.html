<script type="text/javascript">
"use strict";var __awaiter=this&&this.__awaiter||function(e,r,i,o){return new(i=i||Promise)(function(t,n){function fulfilled(e){try{step(o.next(e))}catch(e){n(e)}}function rejected(e){try{step(o.throw(e))}catch(e){n(e)}}function step(e){var n;e.done?t(e.value):((n=e.value)instanceof i?n:new i(function(e){e(n)})).then(fulfilled,rejected)}step((o=o.apply(e,r||[])).next())})},__generator=this&&this.__generator||function(t,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function verb(n){return function(e){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,(n=a?[2&n[0],a.value]:n)[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=r.call(t,s)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}};!function(i,o){i.addEventListener("load",function(){return __awaiter(void 0,void 0,void 0,function(){var s,n,t,c,u,r;return __generator(this,function(e){switch(e.label){case 0:return s=o.getElementById("preload"),i.addEventListener("error",function(e){var n=e.message;return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,gscript("logException","install_ua",n)];case 1:return e.sent(),notify("Something went wrong",config.classes.notify.failure),hide(s,"hidden"),[2]}})})}),i.addEventListener("unhandledrejection",function(e){var e=e.reason,n=void 0===e?"":e;return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,gscript("logException","install_ua",n.toString())];case 1:return e.sent(),notify("Something went wrong",config.classes.notify.failure),hide(s,"hidden"),[2]}})})}),M.AutoInit(),[4,gscript("getSettings")];case 1:return r=e.sent().accounts,n=r.tagManager,t=r.analytics,[4,setupAnalytics(t)];case 2:return e.sent(),[4,setupTagManager(n)];case 3:return e.sent(),checkGTM(n)&&checkAnalytics(t)&&enable("yes"),c={yes:{action:function(){return gscript("installGAtag")},onSuccess:function(){return notify("Successfully installed tag",config.classes.notify.success)},onFailure:function(){return notify("Failed to install tag",config.classes.notify.failure)},onError:function(){return notify("Something went wrong during install",config.classes.notify.failure)}},no:{action:function(){return gscript("setGaInstallDismissed")},onSuccess:function(){return google.script.host.close()},onFailure:function(){return google.script.host.close()},onError:function(){return notify("Failed to save (you will be prompted if no tag is found)",config.classes.notify.failure)}}},u=Object.keys(c),r=function(){checkGTM(n)},o.addEventListener("gtm-change",r),o.addEventListener("ga-change",r),o.addEventListener("click",function(e){var a=e.target;return __awaiter(void 0,void 0,void 0,function(){var n,t,r,i,o;return __generator(this,function(e){switch(e.label){case 0:if(r=a.id,!u.includes(r))return[2];n=(i=c[r]).action,t=i.onSuccess,r=i.onFailure,i=i.onError,e.label=1;case 1:return e.trys.push([1,3,5,6]),show(s,"hidden"),u.forEach(disable),[4,n()];case 2:return(e.sent()?t:r)(),[3,6];case 3:return o=e.sent(),o=o.message,[4,gscript("logException","install_ua",o)];case 4:return e.sent(),i(o),[3,6];case 5:return hide(s,"hidden"),u.forEach(enable),[7];case 6:return[2]}})})}),[2]}})})})}(window,document);
</script>